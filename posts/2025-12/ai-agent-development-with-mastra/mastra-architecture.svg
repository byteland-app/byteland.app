<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 500" width="800" height="500">
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#64748b" />
    </marker>
    <!-- Brand Colors -->
    <color id="blue" value="#007AFF" />
    <color id="green" value="#34C759" />
    <color id="red" value="#FF3B30" />
  </defs>

  <!-- Background -->
  <rect width="800" height="500" fill="#f8fafc" rx="10" />

  <!-- Title -->
  <text x="400" y="40" font-family="'Exo 2', sans-serif" font-size="24" font-weight="bold" text-anchor="middle"
    fill="#1e293b">Mastra Framework Architecture</text>

  <!-- Layers -->

  <!-- Frontend Layer (Blue) -->
  <rect x="50" y="100" width="150" height="350" rx="8" fill="#e0f2fe" stroke="#007AFF" stroke-width="2" />
  <text x="125" y="130" font-family="'Exo 2', sans-serif" font-size="16" font-weight="bold" text-anchor="middle"
    fill="#007AFF">Frontend</text>
  <text x="125" y="200" font-family="'Exo 2', sans-serif" font-size="14" text-anchor="middle" fill="#334155">Next.js /
    React</text>
  <text x="125" y="230" font-family="'Exo 2', sans-serif" font-size="14" text-anchor="middle" fill="#334155">UI
    Components</text>
  <text x="125" y="260" font-family="'Exo 2', sans-serif" font-size="14" text-anchor="middle" fill="#334155">Vercel AI
    SDK</text>

  <!-- Mastra Core Layer (Green) -->
  <rect x="250" y="100" width="300" height="350" rx="8" fill="#dcfce7" stroke="#34C759" stroke-width="2" />
  <text x="400" y="130" font-family="'Exo 2', sans-serif" font-size="18" font-weight="bold" text-anchor="middle"
    fill="#15803d">Mastra Engine (Node.js)</text>

  <!-- Components inside Mastra -->
  <rect x="270" y="160" width="260" height="60" rx="4" fill="#ffffff" stroke="#34C759" stroke-width="1" />
  <text x="400" y="195" font-family="'Exo 2', sans-serif" font-size="14" font-weight="bold" text-anchor="middle"
    fill="#15803d">Workflows (State Machine)</text>

  <rect x="270" y="240" width="120" height="80" rx="4" fill="#ffffff" stroke="#34C759" stroke-width="1" />
  <text x="330" y="285" font-family="'Exo 2', sans-serif" font-size="14" font-weight="bold" text-anchor="middle"
    fill="#15803d">Agents</text>

  <rect x="410" y="240" width="120" height="80" rx="4" fill="#ffffff" stroke="#34C759" stroke-width="1" />
  <text x="470" y="275" font-family="'Exo 2', sans-serif" font-size="14" font-weight="bold" text-anchor="middle"
    fill="#15803d">Tools</text>
  <text x="470" y="295" font-family="monospace" font-size="12" text-anchor="middle" fill="#64748b">(Zod Schema)</text>

  <rect x="270" y="340" width="260" height="90" rx="4" fill="#ffffff" stroke="#34C759" stroke-width="1" />
  <text x="400" y="370" font-family="'Exo 2', sans-serif" font-size="14" font-weight="bold" text-anchor="middle"
    fill="#15803d">Memory &amp; RAG</text>
  <text x="400" y="395" font-family="'Exo 2', sans-serif" font-size="12" text-anchor="middle" fill="#64748b">PostgreSQL
    / Vector Store</text>

  <!-- External Layer (Red/Purple -> Red) -->
  <rect x="600" y="100" width="150" height="350" rx="8" fill="#fee2e2" stroke="#FF3B30" stroke-width="2" />
  <text x="675" y="130" font-family="'Exo 2', sans-serif" font-size="16" font-weight="bold" text-anchor="middle"
    fill="#b91c1c">Model Layer</text>

  <circle cx="675" cy="200" r="30" fill="#ffffff" stroke="#fca5a5" />
  <text x="675" y="205" font-family="'Exo 2', sans-serif" font-size="12" font-weight="bold" text-anchor="middle"
    fill="#b91c1c">OpenAI</text>

  <circle cx="675" cy="280" r="30" fill="#ffffff" stroke="#fca5a5" />
  <text x="675" y="285" font-family="'Exo 2', sans-serif" font-size="12" font-weight="bold" text-anchor="middle"
    fill="#b91c1c">Gemini</text>

  <circle cx="675" cy="360" r="30" fill="#ffffff" stroke="#fca5a5" />
  <text x="675" y="365" font-family="'Exo 2', sans-serif" font-size="12" font-weight="bold" text-anchor="middle"
    fill="#b91c1c">Claude</text>

  <!-- Connectors -->
  <line x1="200" y1="275" x2="250" y2="275" stroke="#64748b" stroke-width="2" stroke-dasharray="5,5"
    marker-end="url(#arrow)" />
  <line x1="550" y1="275" x2="600" y2="275" stroke="#64748b" stroke-width="2" marker-end="url(#arrow)" />
</svg>