{"pageProps":{"projectId":"ink-scroll-view","readmeContent":"# ink-scroll-view\n\nA robust, performance-optimized ScrollView component for [Ink](https://github.com/vadimdemedes/ink) CLI applications.\n\n![License](https://img.shields.io/npm/l/ink-scroll-view?style=flat-square) ![Version](https://img.shields.io/npm/v/ink-scroll-view?style=flat-square) ![Downloads](https://img.shields.io/npm/d18m/ink-scroll-view?style=flat-square)\n\nVisit the [**Project Website**](https://ink-scroll-view.byteland.app).\n\n## ðŸ“˜ Documentation\n\nRead the [**Documentation**](https://ink-scroll-view.byteland.app/docs).\n\n## âœ¨ Features\n\n- **ðŸ“¦ Flexible Container**: Handles content larger than the visible terminal viewport.\n- **âš¡ Performance First**:\n  - **Optimistic Updates**: Immediate state updates for smoother interaction.\n  - **Efficient Re-rendering**: Renders all children but strictly manages visibility via `overflow` and offsets, ensuring correct layout without layout thrashing.\n- **ðŸ“ Auto-Measurement**: Automatically measures child heights using a virtually rendered DOM.\n- **ðŸ” Dynamic Content**: Supports adding, removing, and expanding/collapsing items on the fly.\n- **âš“ï¸ Layout Stability**: Includes logic to maintain scroll position context when content changes.\n\n## ðŸŽ¬ Demos\n\nTry the interactive [**Showcase**](https://ink-scroll-view.byteland.app/showcase).\n\n### Scrolling\n\n![Scrolling Demo](docs/_media/scroll.svg)\n\n### Dynamic Items\n\n![Dynamic Items Demo](docs/_media/items.svg)\n\n### Expand/Collapse\n\n![Expand Demo](docs/_media/expand.svg)\n\n### Resize\n\n![Resize Demo](docs/_media/resize.svg)\n\n### Dynamic Width\n\n![Width Demo](docs/_media/width.svg)\n\n## ðŸ“¦ Installation\n\n```bash\nnpm install ink-scroll-view\n# Peer dependencies\nnpm install ink react\n```\n\n## ðŸš€ Usage\n\n`ScrollView` is a layout primitive. It **does not** capture user input automatically. You must control it programmatically using React `refs` and Ink's `useInput`.\n\n```tsx\nimport React, { useRef, useEffect } from \"react\";\nimport { render, Text, Box, useInput, useStdout } from \"ink\";\nimport { ScrollView, ScrollViewRef } from \"ink-scroll-view\";\n\nconst App = () => {\n  const scrollRef = useRef<ScrollViewRef>(null);\n  const { stdout } = useStdout();\n\n  // 1. Handle Terminal Resizing due to manual window change\n  useEffect(() => {\n    const handleResize = () => scrollRef.current?.remeasure();\n    stdout?.on(\"resize\", handleResize);\n    return () => {\n      stdout?.off(\"resize\", handleResize);\n    };\n  }, [stdout]);\n\n  // 2. Handle Keyboard Input\n  useInput((input, key) => {\n    if (key.upArrow) {\n      scrollRef.current?.scrollBy(-1); // Scroll up 1 line\n    }\n    if (key.downArrow) {\n      scrollRef.current?.scrollBy(1); // Scroll down 1 line\n    }\n    if (key.pageUp) {\n      // Scroll up by viewport height\n      const height = scrollRef.current?.getViewportHeight() || 1;\n      scrollRef.current?.scrollBy(-height);\n    }\n    if (key.pageDown) {\n      const height = scrollRef.current?.getViewportHeight() || 1;\n      scrollRef.current?.scrollBy(height);\n    }\n  });\n\n  return (\n    <Box\n      height={10}\n      width=\"100%\"\n      borderStyle=\"single\"\n      borderColor=\"green\"\n      flexDirection=\"column\"\n    >\n      <ScrollView ref={scrollRef}>\n        {Array.from({ length: 50 }).map((_, i) => (\n          <Text key={i}>Item {i + 1} - content with variable length...</Text>\n        ))}\n      </ScrollView>\n    </Box>\n  );\n};\n\nrender(<App />);\n```\n\n## ðŸ“ How it Works\n\nThe component renders all children into a container but shifts the content vertically using `marginTop`. The parent box with `overflow=\"hidden\"` acts as the \"viewport\".\n\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚  (hidden content)       â”‚ â† Content above viewport\nâ”‚  ...                    â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â† scrollOffset (distance from top)\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚\nâ”‚  â”‚ Visible Viewport  â”‚  â”‚ â† What user sees\nâ”‚  â”‚                   â”‚  â”‚\nâ”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚  (hidden content)       â”‚ â† Content below viewport\nâ”‚  ...                    â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n## ðŸ“š API Reference\n\nFor detailed API documentation, see [API Reference](docs/api/README.md).\n\n### Props (`ScrollViewProps`)\n\nInherits standard `BoxProps` from Ink.\n\n| Prop                    | Type                                      | Description                                                                                |\n| :---------------------- | :---------------------------------------- | :----------------------------------------------------------------------------------------- |\n| `children`              | `ReactNode`                               | Optional. List of child elements. **Must use unique `key`s** (strings/numbers).            |\n| `onScroll`              | `(offset: number) => void`                | Called when scroll position changes.                                                       |\n| `onViewportSizeChange`  | `(layout: { width, height }) => void`     | Called when the **viewport** dimensions change.                                            |\n| `onContentHeightChange` | `(height: number) => void`                | Called when the total content height changes.                                              |\n| `onItemHeightChange`    | `(index, height, previousHeight) => void` | Called when an individual item's height changes.                                           |\n| `debug`                 | `boolean`                                 | Optional. If `true`, overflows content instead of hiding it (useful for debugging layout). |\n| ...                     | `BoxProps`                                | Any other prop accepted by Ink's `Box`.                                                    |\n\n### Ref Methods (`ScrollViewRef`)\n\nAccess these via `ref.current`.\n\n| Method              | Signature                            | Description                                                                                                                |\n| :------------------ | :----------------------------------- | :------------------------------------------------------------------------------------------------------------------------- |\n| `scrollTo`          | `(offset: number) => void`           | Scrolls to an absolute Y offset from the top.                                                                              |\n| `scrollBy`          | `(delta: number) => void`            | Scrolls by a relative amount (negative = up, positive = down).                                                             |\n| `scrollToTop`       | `() => void`                         | Helper to scroll to offset 0.                                                                                              |\n| `scrollToBottom`    | `() => void`                         | Helper to scroll to the maximum possible offset (`contentHeight - viewportHeight`).                                        |\n| `getScrollOffset`   | `() => number`                       | Returns the current scroll offset.                                                                                         |\n| `getContentHeight`  | `() => number`                       | Returns the total height of all content items.                                                                             |\n| `getViewportHeight` | `() => number`                       | Returns the current height of the visible area.                                                                            |\n| `getBottomOffset`   | `() => number`                       | Returns the scroll offset when scrolled to the bottom (`contentHeight - viewportHeight`).                                  |\n| `getItemHeight`     | `(index: number) => number`          | Returns the measured height of a specific item by its index.                                                               |\n| `getItemPosition`   | `(index: number) => { top, height }` | Returns the position (top offset) and height of a specific item.                                                           |\n| `remeasure`         | `() => void`                         | Re-checks viewport dimensions. **Must call this on terminal resize.**                                                      |\n| `remeasureItem`     | `(index: number) => void`            | Forces a specific child to re-measure. Useful for dynamic content (expand/collapse) that doesn't trigger a full re-render. |\n\n### Controlled Component (`ControlledScrollView`)\n\nFor advanced use cases where you need full control over the scroll state (e.g., synchronizing multiple views, animating transitions), you can use `ControlledScrollView`.\n\nIt accepts a `scrollOffset` prop instead of managing it internally.\n\n```tsx\nimport { ControlledScrollView } from \"ink-scroll-view\";\n\n// ...\nconst [offset, setOffset] = useState(0);\n\nreturn (\n  <ControlledScrollView\n    scrollOffset={offset}\n    // ... other props\n  >\n    {children}\n  </ControlledScrollView>\n);\n```\n\n## ðŸ’¡ Tips\n\n1.  **Unique Keys**: Always provide stable, unique `key` props (strings or numbers) to your children. This allows `ScrollView` to accurately track height changes even when items are re-ordered or removed.\n2.  **Terminal Resizing**: Ink components don't automatically know when the terminal window resizes. You need to listen to `process.stdout`'s `resize` event and call `remeasure()` on the ref.\n3.  **Dynamic Content**: If you have an item that expands (e.g., \"See more\"), calling `remeasureItem(index)` is more efficient than forcing a full update.\n\n## ðŸ”— Related Packages\n\nThis package is part of a family of Ink scroll components:\n\n| Package                                                                  | Description                                                                                          |\n| :----------------------------------------------------------------------- | :--------------------------------------------------------------------------------------------------- |\n| [ink-scroll-view](https://github.com/ByteLandTechnology/ink-scroll-view) | Core scroll container component (this package)                                                       |\n| [ink-scroll-list](https://github.com/ByteLandTechnology/ink-scroll-list) | A scrollable list component built on top of ink-scroll-view with focus management and item selection |\n| [ink-scroll-bar](https://github.com/ByteLandTechnology/ink-scroll-bar)   | A standalone scrollbar component that can be used with any scroll container                          |\n\n## License\n\nMIT\n","subPath":""},"__N_SSG":true}