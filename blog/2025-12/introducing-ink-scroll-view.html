<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8" data-next-head=""/><meta name="viewport" content="width=device-width, initial-scale=1.0" data-next-head=""/><title data-next-head="">ByteLand</title><link rel="icon" href="/assets/images/icon.svg" type="image/svg+xml"/><link rel="apple-touch-icon" href="/assets/images/icon.png"/><link rel="preload" href="/_next/static/chunks/c89be53acc45d797.css" as="style"/><link rel="stylesheet" href="/_next/static/chunks/c89be53acc45d797.css" data-n-g=""/><noscript data-n-css=""></noscript><script src="/_next/static/chunks/0eb21ae3df9b6345.js" defer=""></script><script src="/_next/static/chunks/e8cde9e255ff5e90.js" defer=""></script><script src="/_next/static/chunks/565b84617f849628.js" defer=""></script><script src="/_next/static/chunks/turbopack-f64a22c481c92ecd.js" defer=""></script><script src="/_next/static/chunks/baa3ff761ee7d147.js" defer=""></script><script src="/_next/static/chunks/51ba408411420d5b.js" defer=""></script><script src="/_next/static/chunks/f0a3080cb70783f2.js" defer=""></script><script src="/_next/static/chunks/4548080a7655b83a.js" defer=""></script><script src="/_next/static/chunks/a8e86bb765675283.js" defer=""></script><script src="/_next/static/chunks/fd1fef2e073e61c6.js" defer=""></script><script src="/_next/static/chunks/6c50fd5a9cb62cf9.js" defer=""></script><script src="/_next/static/chunks/25a18d3d79530fe7.js" defer=""></script><script src="/_next/static/chunks/32eb26355c0cb5a7.js" defer=""></script><script src="/_next/static/chunks/ef231bdfb627b856.js" defer=""></script><script src="/_next/static/chunks/turbopack-6ed8948773d0d56c.js" defer=""></script><script src="/_next/static/jwCpoJNdEbDvXX6C8_0OH/_ssgManifest.js" defer=""></script><script src="/_next/static/jwCpoJNdEbDvXX6C8_0OH/_buildManifest.js" defer=""></script></head><body><link rel="preload" as="image" href="/assets/images/bytelog-icon.svg"/><link rel="preload" as="image" href="/assets/images/logo.svg"/><link rel="preload" as="image" href="/posts/2025-12/introducing-ink-scroll-view/scroll-architecture.svg"/><link rel="preload" as="image" href="/posts/2025-12/introducing-ink-scroll-view/auto-below.svg"/><link rel="preload" as="image" href="/posts/2025-12/introducing-ink-scroll-view/auto-above.svg"/><link rel="preload" as="image" href="/posts/2025-12/introducing-ink-scroll-view/auto-visible.svg"/><link rel="preload" as="image" href="/posts/2025-12/introducing-ink-scroll-view/align-top.svg"/><link rel="preload" as="image" href="/posts/2025-12/introducing-ink-scroll-view/align-bottom.svg"/><link rel="preload" as="image" href="/posts/2025-12/introducing-ink-scroll-view/align-center.svg"/><div id="__next"><div class="min-h-screen font-sans bg-white"><header class="fixed top-0 left-0 right-0 bg-white/80 backdrop-blur-md z-50 border-b border-slate-200"><div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex items-center justify-between h-16 pointer-events-auto"><div class="flex items-center gap-2 min-w-[200px]"><div class="flex items-center gap-2 cursor-pointer" style="opacity:0"><img src="/assets/images/bytelog-icon.svg" alt="ByteLog Icon" class="h-8 w-auto" style="opacity:0;transform:translateX(-100px) scale(0.8)"/><span class="text-2xl font-extrabold tracking-tight font-brand text-gradient-tri overflow-hidden" style="white-space:nowrap;opacity:0;max-width:0px;filter:blur(8px);transform:translateX(-80px)">ByteLog</span></div></div><div class="flex items-center gap-4 md:gap-8"><a class="flex items-center gap-2 group" title="Back to ByteLand" href="/"><div class="flex items-center gap-2"><img src="/assets/images/logo.svg" alt="ByteLand Logo" class="h-8 w-auto"/></div></a><nav class="hidden md:flex items-center gap-8 text-sm font-medium text-slate-600"><div class="relative"><button class="hover:text-slate-900 transition-colors flex items-center gap-1">Products<svg class="w-4 h-4 transition-transform " fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button></div><a class="hover:text-slate-900 transition-colors" href="/opensource">Open Source</a><a class="hover:text-slate-900 transition-colors" href="/blog">Blog</a><a class="hover:text-slate-900 transition-colors" href="/about">About</a></nav><button class="md:hidden p-2 rounded-lg hover:bg-slate-100 transition-colors" aria-label="Toggle menu"><svg class="w-6 h-6" viewBox="0 0 24 24" fill="none" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><line stroke="#007AFF" x1="3" y1="6" x2="21" y2="6"></line><line stroke="#34C759" opacity="1" x1="3" y1="12" x2="21" y2="12"></line><line stroke="#FF3B30" x1="3" y1="18" x2="21" y2="18"></line></svg></button></div></div></header><main class="pt-16"><div class="pt-8 pb-16"><div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8"><a class="inline-flex items-center text-slate-600 hover:text-rgb-blue mb-8" href="/blog"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 448 512" class="mr-2 w-4 h-4" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.2 288 416 288c17.7 0 32-14.3 32-32s-14.3-32-32-32l-306.7 0L214.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"></path></svg>Back to Blog</a><article style="opacity:0"><header class="mb-12 text-center"><h1 class="text-4xl sm:text-5xl font-extrabold text-slate-900 tracking-tight mb-6">Introducing ink-scroll-view</h1><div class="flex justify-center items-center gap-6 text-md text-slate-500"><div class="flex items-center gap-2"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 448 512" class="w-5 h-5" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M128 0c17.7 0 32 14.3 32 32l0 32 128 0 0-32c0-17.7 14.3-32 32-32s32 14.3 32 32l0 32 48 0c26.5 0 48 21.5 48 48l0 48L0 160l0-48C0 85.5 21.5 64 48 64l48 0 0-32c0-17.7 14.3-32 32-32zM0 192l448 0 0 272c0 26.5-21.5 48-48 48L48 512c-26.5 0-48-21.5-48-48L0 192zm64 80l0 32c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16l0-32c0-8.8-7.2-16-16-16l-32 0c-8.8 0-16 7.2-16 16zm128 0l0 32c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16l0-32c0-8.8-7.2-16-16-16l-32 0c-8.8 0-16 7.2-16 16zm144-16c-8.8 0-16 7.2-16 16l0 32c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16l0-32c0-8.8-7.2-16-16-16l-32 0zM64 400l0 32c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16l0-32c0-8.8-7.2-16-16-16l-32 0c-8.8 0-16 7.2-16 16zm144-16c-8.8 0-16 7.2-16 16l0 32c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16l0-32c0-8.8-7.2-16-16-16l-32 0zm112 16l0 32c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16l0-32c0-8.8-7.2-16-16-16l-32 0c-8.8 0-16 7.2-16 16z"></path></svg><span>December 6, 2025</span></div><div class="flex items-center gap-2"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 448 512" class="w-5 h-5" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M224 256A128 128 0 1 0 224 0a128 128 0 1 0 0 256zm-45.7 48C79.8 304 0 383.8 0 482.3C0 498.7 13.3 512 29.7 512l388.6 0c16.4 0 29.7-13.3 29.7-29.7C448 383.8 368.2 304 269.7 304l-91.4 0z"></path></svg><span>The ByteLand Engineering Team</span></div></div><div class="mt-6 flex flex-wrap justify-center gap-2"><span class="px-3 py-1 text-sm font-semibold text-slate-600 bg-slate-100 rounded-full">Ink</span><span class="px-3 py-1 text-sm font-semibold text-slate-600 bg-slate-100 rounded-full">CLI</span><span class="px-3 py-1 text-sm font-semibold text-slate-600 bg-slate-100 rounded-full">React</span><span class="px-3 py-1 text-sm font-semibold text-slate-600 bg-slate-100 rounded-full">Typescript</span></div></header><div class="prose prose-lg prose-slate max-w-none"><p class="text-lg text-slate-700 leading-relaxed my-6" node="[object Object]">We&#x27;re excited to announce the release of <strong>ink-scroll-view</strong>, a new open-source library that brings smooth, glitch-free scrolling to terminal applications built with <a class="text-rgb-blue font-semibold hover:underline hover:text-rgb-red transition-colors" href="https://github.com/vadimdemedes/ink" target="_blank" rel="noopener noreferrer" node="[object Object]">Ink</a>.</p>
<h2 class="text-2xl sm:text-3xl font-bold text-rgb-blue mt-10 mb-4 border-b border-blue-200/50 pb-3 scroll-mt-20" node="[object Object]">Why We Built This</h2>
<p class="text-lg text-slate-700 leading-relaxed my-6" node="[object Object]">If you&#x27;ve ever tried to build a CLI tool with Ink, you&#x27;ve likely hit a wall: <strong>there&#x27;s no built-in way to scroll content</strong>. Ink gives you powerful React primitives like <code class="undefined" node="[object Object]">&lt;Box&gt;</code> and <code class="undefined" node="[object Object]">&lt;Text&gt;</code>, but when your content exceeds the terminal height, you&#x27;re on your own.</p>
<p class="text-lg text-slate-700 leading-relaxed my-6" node="[object Object]">We needed a reliable scrolling solution for our own CLI tools, so we built one ‚Äî and now we&#x27;re sharing it with the community.</p>
<p class="text-lg text-slate-700 leading-relaxed my-6" node="[object Object]"><strong>ink-scroll-view</strong> provides:</p>
<ul class="list-disc pl-6 my-6 space-y-3 marker:text-slate-400" node="[object Object]">
<li class="text-lg text-slate-700" node="[object Object]">üöÄ <strong>High-performance scrolling</strong> ‚Äî Uses a &quot;negative margin&quot; technique instead of string slicing, minimizing re-renders</li>
<li class="text-lg text-slate-700" node="[object Object]">üéØ <strong>Smart alignment</strong> ‚Äî Scroll to any item with <code class="undefined" node="[object Object]">auto</code>, <code class="undefined" node="[object Object]">top</code>, <code class="undefined" node="[object Object]">center</code>, or <code class="undefined" node="[object Object]">bottom</code> alignment</li>
<li class="text-lg text-slate-700" node="[object Object]">üìê <strong>Dynamic content support</strong> ‚Äî Handles variable-height items and runtime content changes seamlessly</li>
<li class="text-lg text-slate-700" node="[object Object]">‚ö° <strong>Zero flicker</strong> ‚Äî Smooth scrolling without visual glitches</li>
</ul>
<h2 class="text-2xl sm:text-3xl font-bold text-rgb-blue mt-10 mb-4 border-b border-blue-200/50 pb-3 scroll-mt-20" node="[object Object]">The Engineering Challenges</h2>
<p class="text-lg text-slate-700 leading-relaxed my-6" node="[object Object]">Building a scroll view in a CLI environment presents unique constraints compared to the web:</p>
<ol class="list-decimal pl-6 my-6 space-y-3 marker:text-slate-400" node="[object Object]">
<li class="text-lg text-slate-700" node="[object Object]"><strong>No Native &quot;Scroll&quot; Property</strong>: Terminal buffers are linear streams. You cannot simply set <code class="undefined" node="[object Object]">scrollTop = 100</code>. To &quot;scroll&quot;, you must fundamentally alter <em>what</em> text is sent to the output buffer.</li>
<li class="text-lg text-slate-700" node="[object Object]"><strong>Layout Dependency</strong>: To scroll correctly, you need to know the precise height of the content <em>before</em> you decide which slice of it to show. However, in React, layout measurements usually happen <em>after</em> the render commit phase.</li>
<li class="text-lg text-slate-700" node="[object Object]"><strong>Clipping</strong>: You need to mask content that is &quot;out of view&quot; without breaking the layout calculations of the content that <em>is</em> in view. Simply not rendering the children means their dimensions cannot be measured.</li>
</ol>
<h2 class="text-2xl sm:text-3xl font-bold text-rgb-blue mt-10 mb-4 border-b border-blue-200/50 pb-3 scroll-mt-20" node="[object Object]">The Solution: The &quot;Negative Margin&quot; Viewport</h2>
<p class="text-lg text-slate-700 leading-relaxed my-6" node="[object Object]">Our solution leverages Ink&#x27;s exposure of Yoga layout metrics combined with a classic &quot;sliding window&quot; technique.</p>
<h3 class="text-xl sm:text-2xl font-bold text-rgb-green mt-8 mb-4 scroll-mt-20" node="[object Object]">1. Visualizing the Architecture</h3>
<p class="text-lg text-slate-700 leading-relaxed my-6" node="[object Object]">Instead of manually slicing strings, we render the <em>entire</em> content list but shift its position vertically within a clipped container.</p>
<p class="text-lg text-slate-700 leading-relaxed my-6" node="[object Object]"><img class="max-w-full h-auto rounded-xl shadow-lg my-8 mx-auto" src="/posts/2025-12/introducing-ink-scroll-view/scroll-architecture.svg" alt="Scroll Architecture" node="[object Object]"/></p>
<p class="text-lg text-slate-700 leading-relaxed my-6" node="[object Object]">The implementation relies on three nested layers:</p>
<ol class="list-decimal pl-6 my-6 space-y-3 marker:text-slate-400" node="[object Object]">
<li class="text-lg text-slate-700" node="[object Object]"><strong>Viewport (Outer Box)</strong>: Fixed <code class="undefined" node="[object Object]">height</code>, <code class="undefined" node="[object Object]">overflowY: &quot;hidden&quot;</code>. This clips content.</li>
<li class="text-lg text-slate-700" node="[object Object]"><strong>Container (Inner Box)</strong>: <code class="undefined" node="[object Object]">marginTop: -scrollTop</code>. This shifts content up.</li>
<li class="text-lg text-slate-700" node="[object Object]"><strong>Items</strong>: The actual content.</li>
</ol>
<p class="text-lg text-slate-700 leading-relaxed my-6" node="[object Object]">The Layout Engine (Yoga) calculates the positions of <em>all</em> items. Ink then renders the Container shifted upwards. The Viewport discards any lines that physically fall outside its 0 to <code class="undefined" node="[object Object]">height</code> range.</p>
<h3 class="text-xl sm:text-2xl font-bold text-rgb-green mt-8 mb-4 scroll-mt-20" node="[object Object]">2. Reactivity: Handling Dynamic Content</h3>
<p class="text-lg text-slate-700 leading-relaxed my-6" node="[object Object]">In a terminal, window resizing and dynamic data loading are common. If the data changes (e.g., a log line is added) or the component changes size (e.g., an accordion expands), the scroll position must remain valid.</p>
<p class="text-lg text-slate-700 leading-relaxed my-6" node="[object Object]"><strong>The Challenge:</strong> React renders first, <em>then</em> Ink/Yoga calculates layout. We don&#x27;t know the height of an item until <em>after</em> it has been rendered to the virtual DOM.</p>
<p class="text-lg text-slate-700 leading-relaxed my-6" node="[object Object]"><strong>The Solution:</strong></p>
<ol class="list-decimal pl-6 my-6 space-y-3 marker:text-slate-400" node="[object Object]">
<li class="text-lg text-slate-700" node="[object Object]">
<p class="text-lg text-slate-700 leading-relaxed my-6" node="[object Object]"><strong>Initial Measurement</strong>:
Every direct child is wrapped in a <code class="undefined" node="[object Object]">MeasurableItem</code> component that hooks into Ink&#x27;s <code class="undefined" node="[object Object]">measureElement</code> to report its height.</p>
<div class="rounded-xl overflow-hidden my-6 shadow-lg border border-slate-700/50"><div node="[object Object]" style="color:#d4d4d4;font-size:0.9rem;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1.5rem;margin:0;overflow:auto;background:#1e1e1e;border-radius:0;background-color:#1e1e1e"><code class="language-tsx" style="white-space:pre;color:#9cdcfe;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#dcdcaa">useLayoutEffect</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#569CD6">=&gt;</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>  </span><span class="token" style="color:#569CD6">const</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span> height </span><span class="token" style="color:#d4d4d4">}</span><span> </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#dcdcaa">measureElement</span><span class="token" style="color:#d4d4d4">(</span><span>ref</span><span class="token" style="color:#d4d4d4">.</span><span class="token property-access">current</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span>  </span><span class="token" style="color:#dcdcaa">onMeasure</span><span class="token" style="color:#d4d4d4">(</span><span>index</span><span class="token" style="color:#d4d4d4">,</span><span> height</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span></span><span class="token" style="color:#d4d4d4">}</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token" style="color:#d4d4d4">[</span><span>width</span><span class="token" style="color:#d4d4d4">,</span><span> children</span><span class="token" style="color:#d4d4d4">]</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span> </span><span class="token" style="color:#6a9955">// Re-run if width or content changes</span></code></div></div>
</li>
<li class="text-lg text-slate-700" node="[object Object]">
<p class="text-lg text-slate-700 leading-relaxed my-6" node="[object Object]"><strong>Responding to Dynamic Changes</strong>:
Content and layout can change at runtime. Two APIs handle re-measurement:</p>
<ul class="list-disc pl-6 my-6 space-y-3 marker:text-slate-400" node="[object Object]">
<li class="text-lg text-slate-700" node="[object Object]"><code class="undefined" node="[object Object]">remeasure()</code>: Call this when the ScrollView&#x27;s container size changes (e.g., terminal resize). Items re-layout automatically, but ScrollView needs this trigger to recalculate.</li>
<li class="text-lg text-slate-700" node="[object Object]"><code class="undefined" node="[object Object]">remeasureItem(index)</code>: Call this when a specific item&#x27;s content changes. This notifies ScrollView to re-measure that item.</li>
</ul>
</li>
<li class="text-lg text-slate-700" node="[object Object]">
<p class="text-lg text-slate-700 leading-relaxed my-6" node="[object Object]"><strong>Bounds Clamping</strong>:
Whenever item heights update, we recalculate <code class="undefined" node="[object Object]">maxScroll</code> (<code class="undefined" node="[object Object]">totalContentHeight - viewportHeight</code>). If the current scroll position becomes invalid (e.g., items were deleted), we automatically clamp it to a valid range.</p>
</li>
</ol>
<h3 class="text-xl sm:text-2xl font-bold text-rgb-green mt-8 mb-4 scroll-mt-20" node="[object Object]">3. Smart Scrolling: Alignment Strategies</h3>
<p class="text-lg text-slate-700 leading-relaxed my-6" node="[object Object]">A critical feature of <code class="undefined" node="[object Object]">ScrollList</code> is its ability to intelligently scroll to an item. We support four alignment modes: <code class="undefined" node="[object Object]">auto</code>, <code class="undefined" node="[object Object]">top</code>, <code class="undefined" node="[object Object]">bottom</code>, and <code class="undefined" node="[object Object]">center</code>.</p>
<h4 class="text-lg sm:text-xl font-bold text-rgb-red mt-8 mb-4 scroll-mt-20" node="[object Object]">Mode: <code class="undefined" node="[object Object]">auto</code> (Default)</h4>
<p class="text-lg text-slate-700 leading-relaxed my-6" node="[object Object]">The &quot;least intrusive&quot; scroll.</p>
<p class="text-lg text-slate-700 leading-relaxed my-6" node="[object Object]"><strong>If the item is below the viewport</strong>, we scroll just enough to show it at the <strong>bottom</strong>:</p>
<p class="text-lg text-slate-700 leading-relaxed my-6" node="[object Object]"><img class="max-w-full h-auto rounded-xl shadow-lg my-8 mx-auto" src="/posts/2025-12/introducing-ink-scroll-view/auto-below.svg" alt="Auto Below" node="[object Object]"/></p>
<p class="text-lg text-slate-700 leading-relaxed my-6" node="[object Object]"><strong>If the item is above the viewport</strong>, we scroll just enough to show it at the <strong>top</strong>:</p>
<p class="text-lg text-slate-700 leading-relaxed my-6" node="[object Object]"><img class="max-w-full h-auto rounded-xl shadow-lg my-8 mx-auto" src="/posts/2025-12/introducing-ink-scroll-view/auto-above.svg" alt="Auto Above" node="[object Object]"/></p>
<p class="text-lg text-slate-700 leading-relaxed my-6" node="[object Object]"><strong>If it&#x27;s already visible</strong>, we do nothing:</p>
<p class="text-lg text-slate-700 leading-relaxed my-6" node="[object Object]"><img class="max-w-full h-auto rounded-xl shadow-lg my-8 mx-auto" src="/posts/2025-12/introducing-ink-scroll-view/auto-visible.svg" alt="Auto Visible" node="[object Object]"/></p>
<h4 class="text-lg sm:text-xl font-bold text-rgb-red mt-8 mb-4 scroll-mt-20" node="[object Object]">Forced Alignments</h4>
<p class="text-lg text-slate-700 leading-relaxed my-6" node="[object Object]">Sometimes you want precise control, like centering a search result or jumping to the top of a list.</p>
<p class="text-lg text-slate-700 leading-relaxed my-6" node="[object Object]"><strong><code class="undefined" node="[object Object]">top</code></strong>: Always align item to the top of the viewport.</p>
<p class="text-lg text-slate-700 leading-relaxed my-6" node="[object Object]"><img class="max-w-full h-auto rounded-xl shadow-lg my-8 mx-auto" src="/posts/2025-12/introducing-ink-scroll-view/align-top.svg" alt="Align Top" node="[object Object]"/></p>
<p class="text-lg text-slate-700 leading-relaxed my-6" node="[object Object]"><strong><code class="undefined" node="[object Object]">bottom</code></strong>: Always align item to the bottom of the viewport.</p>
<p class="text-lg text-slate-700 leading-relaxed my-6" node="[object Object]"><img class="max-w-full h-auto rounded-xl shadow-lg my-8 mx-auto" src="/posts/2025-12/introducing-ink-scroll-view/align-bottom.svg" alt="Align Bottom" node="[object Object]"/></p>
<p class="text-lg text-slate-700 leading-relaxed my-6" node="[object Object]"><strong><code class="undefined" node="[object Object]">center</code></strong>: Always align item to the center of the viewport.</p>
<p class="text-lg text-slate-700 leading-relaxed my-6" node="[object Object]"><img class="max-w-full h-auto rounded-xl shadow-lg my-8 mx-auto" src="/posts/2025-12/introducing-ink-scroll-view/align-center.svg" alt="Align Center" node="[object Object]"/></p>
<p class="text-lg text-slate-700 leading-relaxed my-6" node="[object Object]"><strong>The Algorithm:</strong></p>
<ol class="list-decimal pl-6 my-6 space-y-3 marker:text-slate-400" node="[object Object]">
<li class="text-lg text-slate-700" node="[object Object]"><strong>Get Metrics</strong>: Retrieve the <code class="undefined" node="[object Object]">top</code>, <code class="undefined" node="[object Object]">height</code>, and <code class="undefined" node="[object Object]">bottom</code> of the target item relative to the full content list.</li>
<li class="text-lg text-slate-700" node="[object Object]"><strong>Apply Logic</strong>: Calculate the new <code class="undefined" node="[object Object]">scrollOffset</code> based on the chosen alignment strategy as visualized above.</li>
<li class="text-lg text-slate-700" node="[object Object]"><strong>Clamp</strong>: Ensure the new offset is within valid bounds (<code class="undefined" node="[object Object]">0</code> to <code class="undefined" node="[object Object]">maxScroll</code>).</li>
</ol>
<h2 class="text-2xl sm:text-3xl font-bold text-rgb-blue mt-10 mb-4 border-b border-blue-200/50 pb-3 scroll-mt-20" node="[object Object]">Summary</h2>
<p class="text-lg text-slate-700 leading-relaxed my-6" node="[object Object]"><code class="undefined" node="[object Object]">ink-scroll-view</code> bridges the gap between web-like development DX and the constraints of terminal rendering.</p>
<ul class="list-disc pl-6 my-6 space-y-3 marker:text-slate-400" node="[object Object]">
<li class="text-lg text-slate-700" node="[object Object]">It uses <strong>negative margins</strong> to emulate scrolling.</li>
<li class="text-lg text-slate-700" node="[object Object]">It performs <strong>O(1)</strong> lookups for item positioning to handle navigation efficiently.</li>
<li class="text-lg text-slate-700" node="[object Object]">It uses <strong>reactive measurement hooks</strong> to support dynamic content and variable-height items seamlessly.</li>
</ul>
<p class="text-lg text-slate-700 leading-relaxed my-6" node="[object Object]">By solving these low-level engineering problems, developers can focus on building rich, interactive CLI tools.</p></div></article></div></div></main><footer class="bg-slate-900 text-slate-400 py-12 relative border-t border-slate-800"><div class="absolute top-0 left-0 right-0 h-1 bg-gradient-tri"></div><div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"><div class="grid md:grid-cols-3 gap-8 mb-8 text-center md:text-left"><div class="flex flex-col items-center md:items-start"><div class="flex items-center gap-2 mb-4"><img src="/assets/images/bytelog-icon.svg" alt="ByteLog Icon" class="h-8 w-auto"/><h4 class="font-bold text-lg font-brand text-gradient-tri">ByteLog</h4></div><p class="text-sm max-w-xs">Insights and updates from the ByteLand team.</p></div><div><h4 class="text-white font-bold text-lg mb-4">Links</h4><div class="flex flex-col items-center md:items-start"><ul class="space-y-2 text-sm"><li><a class="hover:text-white transition-colors">Home</a></li><li><a class="hover:text-white transition-colors">Products</a></li><li><a class="hover:text-white transition-colors">Open Source</a></li><li><a class="hover:text-white transition-colors">About</a></li></ul></div></div><div class="flex flex-col items-center md:items-start"><h4 class="text-white font-bold text-lg mb-4">Connect</h4><div class="flex gap-4"><a href="https://github.com/ByteLandTechnology" target="_blank" rel="noopener noreferrer" class="hover:text-white transition-colors"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 496 512" class="w-5 h-5" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg></a><a href="mailto:info@byteland.app" class="hover:text-white transition-colors"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" class="w-5 h-5" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M48 64C21.5 64 0 85.5 0 112c0 15.1 7.1 29.3 19.2 38.4L236.8 313.6c11.4 8.5 27 8.5 38.4 0L492.8 150.4c12.1-9.1 19.2-23.3 19.2-38.4c0-26.5-21.5-48-48-48L48 64zM0 176L0 384c0 35.3 28.7 64 64 64l384 0c35.3 0 64-28.7 64-64l0-208L294.4 339.2c-22.8 17.1-54 17.1-76.8 0L0 176z"></path></svg></a></div></div></div><div class="mt-12 pt-8 border-t border-slate-800 text-center text-xs text-slate-500"><p class="mb-2">¬© <!-- -->2026<!-- --> ByteLand Technology Limited. All rights reserved.</p><p>This website is open source.<!-- --> <a href="https://github.com/ByteLandTechnology/byteland.app" target="_blank" rel="noopener noreferrer" class="hover:text-slate-300 underline underline-offset-2 transition-colors">View Source Code</a></p></div></div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"content":"\nWe're excited to announce the release of **ink-scroll-view**, a new open-source library that brings smooth, glitch-free scrolling to terminal applications built with [Ink](https://github.com/vadimdemedes/ink).\n\n## Why We Built This\n\nIf you've ever tried to build a CLI tool with Ink, you've likely hit a wall: **there's no built-in way to scroll content**. Ink gives you powerful React primitives like `\u003cBox\u003e` and `\u003cText\u003e`, but when your content exceeds the terminal height, you're on your own.\n\nWe needed a reliable scrolling solution for our own CLI tools, so we built one ‚Äî and now we're sharing it with the community.\n\n**ink-scroll-view** provides:\n\n- üöÄ **High-performance scrolling** ‚Äî Uses a \"negative margin\" technique instead of string slicing, minimizing re-renders\n- üéØ **Smart alignment** ‚Äî Scroll to any item with `auto`, `top`, `center`, or `bottom` alignment\n- üìê **Dynamic content support** ‚Äî Handles variable-height items and runtime content changes seamlessly\n- ‚ö° **Zero flicker** ‚Äî Smooth scrolling without visual glitches\n\n## The Engineering Challenges\n\nBuilding a scroll view in a CLI environment presents unique constraints compared to the web:\n\n1.  **No Native \"Scroll\" Property**: Terminal buffers are linear streams. You cannot simply set `scrollTop = 100`. To \"scroll\", you must fundamentally alter _what_ text is sent to the output buffer.\n2.  **Layout Dependency**: To scroll correctly, you need to know the precise height of the content _before_ you decide which slice of it to show. However, in React, layout measurements usually happen _after_ the render commit phase.\n3.  **Clipping**: You need to mask content that is \"out of view\" without breaking the layout calculations of the content that _is_ in view. Simply not rendering the children means their dimensions cannot be measured.\n\n## The Solution: The \"Negative Margin\" Viewport\n\nOur solution leverages Ink's exposure of Yoga layout metrics combined with a classic \"sliding window\" technique.\n\n### 1. Visualizing the Architecture\n\nInstead of manually slicing strings, we render the _entire_ content list but shift its position vertically within a clipped container.\n\n![Scroll Architecture](./introducing-ink-scroll-view/scroll-architecture.svg)\n\nThe implementation relies on three nested layers:\n\n1.  **Viewport (Outer Box)**: Fixed `height`, `overflowY: \"hidden\"`. This clips content.\n2.  **Container (Inner Box)**: `marginTop: -scrollTop`. This shifts content up.\n3.  **Items**: The actual content.\n\nThe Layout Engine (Yoga) calculates the positions of _all_ items. Ink then renders the Container shifted upwards. The Viewport discards any lines that physically fall outside its 0 to `height` range.\n\n### 2. Reactivity: Handling Dynamic Content\n\nIn a terminal, window resizing and dynamic data loading are common. If the data changes (e.g., a log line is added) or the component changes size (e.g., an accordion expands), the scroll position must remain valid.\n\n**The Challenge:** React renders first, _then_ Ink/Yoga calculates layout. We don't know the height of an item until _after_ it has been rendered to the virtual DOM.\n\n**The Solution:**\n\n1.  **Initial Measurement**:\n    Every direct child is wrapped in a `MeasurableItem` component that hooks into Ink's `measureElement` to report its height.\n\n    ```tsx\n    useLayoutEffect(() =\u003e {\n      const { height } = measureElement(ref.current);\n      onMeasure(index, height);\n    }, [width, children]); // Re-run if width or content changes\n    ```\n\n2.  **Responding to Dynamic Changes**:\n    Content and layout can change at runtime. Two APIs handle re-measurement:\n    - `remeasure()`: Call this when the ScrollView's container size changes (e.g., terminal resize). Items re-layout automatically, but ScrollView needs this trigger to recalculate.\n    - `remeasureItem(index)`: Call this when a specific item's content changes. This notifies ScrollView to re-measure that item.\n\n3.  **Bounds Clamping**:\n    Whenever item heights update, we recalculate `maxScroll` (`totalContentHeight - viewportHeight`). If the current scroll position becomes invalid (e.g., items were deleted), we automatically clamp it to a valid range.\n\n### 3. Smart Scrolling: Alignment Strategies\n\nA critical feature of `ScrollList` is its ability to intelligently scroll to an item. We support four alignment modes: `auto`, `top`, `bottom`, and `center`.\n\n#### Mode: `auto` (Default)\n\nThe \"least intrusive\" scroll.\n\n**If the item is below the viewport**, we scroll just enough to show it at the **bottom**:\n\n![Auto Below](./introducing-ink-scroll-view/auto-below.svg)\n\n**If the item is above the viewport**, we scroll just enough to show it at the **top**:\n\n![Auto Above](./introducing-ink-scroll-view/auto-above.svg)\n\n**If it's already visible**, we do nothing:\n\n![Auto Visible](./introducing-ink-scroll-view/auto-visible.svg)\n\n#### Forced Alignments\n\nSometimes you want precise control, like centering a search result or jumping to the top of a list.\n\n**`top`**: Always align item to the top of the viewport.\n\n![Align Top](./introducing-ink-scroll-view/align-top.svg)\n\n**`bottom`**: Always align item to the bottom of the viewport.\n\n![Align Bottom](./introducing-ink-scroll-view/align-bottom.svg)\n\n**`center`**: Always align item to the center of the viewport.\n\n![Align Center](./introducing-ink-scroll-view/align-center.svg)\n\n**The Algorithm:**\n\n1.  **Get Metrics**: Retrieve the `top`, `height`, and `bottom` of the target item relative to the full content list.\n2.  **Apply Logic**: Calculate the new `scrollOffset` based on the chosen alignment strategy as visualized above.\n3.  **Clamp**: Ensure the new offset is within valid bounds (`0` to `maxScroll`).\n\n## Summary\n\n`ink-scroll-view` bridges the gap between web-like development DX and the constraints of terminal rendering.\n\n- It uses **negative margins** to emulate scrolling.\n- It performs **O(1)** lookups for item positioning to handle navigation efficiently.\n- It uses **reactive measurement hooks** to support dynamic content and variable-height items seamlessly.\n\nBy solving these low-level engineering problems, developers can focus on building rich, interactive CLI tools.\n","title":"Introducing ink-scroll-view","date":"2025-12-06","tags":["Ink","CLI","React","Typescript"],"author":"The ByteLand Engineering Team","slug":"2025-12/introducing-ink-scroll-view"}},"__N_SSG":true},"page":"/blog/[...slug]","query":{"slug":["2025-12","introducing-ink-scroll-view"]},"buildId":"jwCpoJNdEbDvXX6C8_0OH","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>